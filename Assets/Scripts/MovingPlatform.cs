using System.Collections;
using UnityEngine;

public class MovingPlatform : MonoBehaviour
{

    //--------------------------------------------------------------------------------------------------------------------------------------------//
    //--------------------------------------------------------------------------------------------------------------------------------------------//

    [SerializeField]private Transform[] waypoints;   // Array to hold the two waypoints

    //--------------------------------------------------------------------------------------------------------------------------------------------//
    //--------------------------------------------------------------------------------------------------------------------------------------------//

    [SerializeField]private float speed = 1.5f;// Speed of the platfor

    //--------------------------------------------------------------------------------------------------------------------------------------------//
    //--------------------------------------------------------------------------------------------------------------------------------------------//

    private int currentWaypoint;

    //--------------------------------------------------------------------------------------------------------------------------------------------//
    //--------------------------------------------------------------------------------------------------------------------------------------------//

    private void Start()
    {
        currentWaypoint = (int)Mathf.Round(Random.Range(0, 1));
        speed = Mathf.Clamp(Random.Range(0.9f, 2), 0.9f, 1.99f);

    }

    //--------------------------------------------------------------------------------------------------------------------------------------------//
    //--------------------------------------------------------------------------------------------------------------------------------------------//

    void Update()
    {
        // Check if platform has reached the current waypoint
        if (transform.position != waypoints[currentWaypoint].position)
        {
            // Move towards the current waypoint
            Vector3 targetPosition = waypoints[currentWaypoint].position;
            transform.position = Vector3.MoveTowards(transform.position, targetPosition, speed * Time.deltaTime);
        }
        else
        {
            // Switch to the next waypoint
            currentWaypoint = (currentWaypoint + 1) % waypoints.Length;
        }
    }

   


    //--------------------------------------------------------------------------------------------------------------------------------------------//
    //--------------------------------------------------------------------------------------------------------------------------------------------//

}
